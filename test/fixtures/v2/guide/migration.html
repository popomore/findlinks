
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>从 Vue 1.x 迁移 - vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js - Intuitive, Fast and Composable MVVM for building interactive interfaces.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="从 Vue 1.x 迁移 - vue.js">
        <meta property="og:description" content="Vue.js - Intuitive, Fast and Composable MVVM for building interactive interfaces.">
        <meta property="og:image" content="https://cn.vuejs.org/images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="从 Vue 1.x 迁移 - vue.js">
        <meta name="twitter:description" content="Vue.js - Intuitive, Fast and Composable MVVM for building interactive interfaces.">
        <meta name="twitter:image" content="https://cn.vuejs.org/images/logo.png">

        <link rel="icon" href="/images/logo.png" type="image/x-icon">

        <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Dosis:500&text=Vue.js' rel='stylesheet' type='text/css'>

        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/js/vue.js"></script>
        <script>window.PAGE_TYPE = "guide"</script>
    </head>
    <body class="docs">        <div id="mobile-bar" >
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png">
    <span>Vue.js</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/v2/guide/" class="nav-link current">指南</a></li>
<li><a href="/v2/api/" class="nav-link">API</a></li>
<li><a href="/v2/examples/" class="nav-link">示例</a></li>
<li><a href="/about/" class="nav-link">贡献者</a></li>
<li><a href="https://medium.com/the-vue-point" target="_blank" class="nav-link">博客</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">社区</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/vuejs/vue" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">论坛</a></li>
    <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">聊天室</a></li>
    <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
    <li><a href="https://vuejsjob.com/?ref=vuejs" class="nav-link" target="_blank">工作</a></li>
  </ul>
</li>


  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/v2/guide/" class="nav-link current">指南</a></li>
<li><a href="/v2/api/" class="nav-link">API</a></li>
<li><a href="/v2/examples/" class="nav-link">示例</a></li>
<li><a href="/about/" class="nav-link">贡献者</a></li>
<li><a href="https://medium.com/the-vue-point" target="_blank" class="nav-link">博客</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">社区</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/vuejs/vue" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">论坛</a></li>
    <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">聊天室</a></li>
    <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
    <li><a href="https://vuejsjob.com/?ref=vuejs" class="nav-link" target="_blank">工作</a></li>
  </ul>
</li>


    </ul>
    <div class="list">
        <div id="donate" style="margin-bottom: 20px">
            <img src="/images/patreon.png">
            <a href="/support-vuejs">支持 Vue.js</a>
        </div>
        <h2>
            Guide
            <select class="version-select">
                <option value="SELF" selected>2.0</option>
                <option value="v1">1.0</option>
                <option value="012">0.12</option>
                <option value="011">0.11</option>
            </select>
        </h2>
        <ul class="menu-root">
            
                
                
                  <li><h3>基础</h3></li>
                
                
                
                
                <li>
                    <a href="/v2/guide/installation.html" class="sidebar-link">安装</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/index.html" class="sidebar-link">介绍</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/instance.html" class="sidebar-link">Vue 实例</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/syntax.html" class="sidebar-link">模板语法</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/computed.html" class="sidebar-link">计算属性</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/class-and-style.html" class="sidebar-link">Class 与 Style 绑定</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/conditional.html" class="sidebar-link">条件渲染</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/list.html" class="sidebar-link">列表渲染</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/events.html" class="sidebar-link">事件处理器</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/forms.html" class="sidebar-link">表单控件绑定</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/components.html" class="sidebar-link">组件</a>
                </li>
            
                
                
                
                  <li><h3>进阶</h3></li>
                
                
                
                <li>
                    <a href="/v2/guide/reactivity.html" class="sidebar-link">深入响应式原理</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/transitions.html" class="sidebar-link">过渡效果</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/transitioning-state.html" class="sidebar-link">过渡状态</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/render-function.html" class="sidebar-link">Render 函数</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/custom-directive.html" class="sidebar-link">自定义指令</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/mixins.html" class="sidebar-link">混合</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/plugins.html" class="sidebar-link">插件</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/single-file-components.html" class="sidebar-link">单文件组件</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/deployment.html" class="sidebar-link">生产环境部署</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/routing.html" class="sidebar-link">路由</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/state-management.html" class="sidebar-link">状态管理</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/unit-testing.html" class="sidebar-link">单元测试</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/ssr.html" class="sidebar-link">服务端渲染</a>
                </li>
            
                
                
                
                
                  <li><h3>迁移</h3></li>
                
                
                <li>
                    <a href="/v2/guide/migration.html" class="sidebar-link current">从 Vue 1.x 迁移</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/migration-vue-router.html" class="sidebar-link">从 Vue Router 0.7.x 迁移</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/migration-vuex.html" class="sidebar-link">从 Vuex 0.6.x 迁移到 1.0</a>
                </li>
            
                
                
                
                
                
                  <li><h3>更多</h3></li>
                
                <li>
                    <a href="/v2/guide/comparison.html" class="sidebar-link">对比其他框架</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/v2/guide/join.html" class="sidebar-link">加入Vue.js社区</a>
                </li>
            
        </ul>
    </div>
</div>


<div class="content guide with-sidebar migration-guide">
    
      <div id="ad">
  <span>Sponsored By</span><br>
  <a href="http://www.thedifferenceengine.io/" target="_blank"
    style="background-color: rgba(0,0,0,.85); padding: 10px 0">
    <img src="/images/tde.png">
  </a>
  <!-- <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=vuejs" id="_carbonads_js"></script> -->
</div>

    
    
      <h1>从 Vue 1.x 迁移</h1>
    
    
    <h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><blockquote>
<p>哇，非常长的一页！是否意味着 Vue2.0 已经完全不同了呢，是否需要从头学起呢，Vue1.0 的项目是不是没法迁移了？</p>
</blockquote>
<p>非常开心地告诉你，并不是！ 几乎90%的 API 和核心概念都没有变。因为本节包含了很多详尽的阐述以及许多迁移的例子，所以显得有点长。不用担心，<strong>你也不必从头到尾把本节读一遍！</strong></p>
<blockquote>
<p>怎么开始做项目迁移？</p>
</blockquote>
<ol>
<li><p>从运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 这个工具开始。我们非常谨慎地把一个高级 Vue 开发工具简化并重新编译成了一个命令行工具。当这个工具发现了一个弃用的用法之后，就会给出通知和建议，并附上关于详细信息的链接。</p>
</li>
<li><p>然后，看看侧边栏给出的关于这一页的内容。如果你发现有的地方有影响，而该工具没有给出提示的，请检查并解决一下该项。</p>
</li>
<li><p>如果有测试的话，测试一边看看还有什么问题。如果没有测试的话，打开 app，随机翻一下，看一下有什么报错或者警告信息。</p>
</li>
<li><p>至此，你的 app 基本已经迁移完毕了。如果你有更多想了解的，可以阅读一下本节剩下的部分。</p>
</li>
</ol>
<blockquote>
<p>从1.0 迁移到2.0要花多长时间？</p>
</blockquote>
<p>取决于以下几个方面：</p>
<ul>
<li><p>要迁移的 app 的规模。（小到中型的基本上一天内就可以搞定）</p>
</li>
<li><p>为了耍耍 Vue2.0 的新功能分心了多少次。 😉 &nbsp;不是说你们，我们构建 Vue2.0 的时候经常发生这种事。</p>
</li>
<li><p>使用了哪些弃用的功能。基本上大部分弃用的功能可以通过 find-and-replace 来实现升级，但有一些还是要花点时间。如果你没有遵循最佳实践，那么 Vue2.0 会强迫你去遵循。这有利于项目的长期运行，但是也意味着重构（也许有些需要重构的东西已经过时）。</p>
</li>
</ul>
<blockquote>
<p>迁移到 Vue 2 ，我也需要更新 Vuex 和 Vue-Router ?</p>
</blockquote>
<p>只有 Vue-Router 2 是可编译的，可以遵循  <a href="migration-vue-router.html">Vue-Router 迁移路径</a> 来处理。幸运地是， 大多数应用不含有许多路由代码，所以迁移不用超过一小时。</p>
<p>对于 Vuex ， 甚至 0.8 版本和 Vue 2 一起都是可以编译的，所以不必强制更新。 促使你立即更新的理由是 Vuex 2 有更先进的功能，比如模块和减少的样板文件。</p>
<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><h3 id="片段实例-移除"><a href="#片段实例-移除" class="headerlink" title="片段实例 移除"></a>片段实例 <sup>移除</sup></h3><p>每个组件有且仅有一个根节点。不再支持片段实例，如果你有这样的模板：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>bar<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p>最好把它包裹到一个简单的容器里面去：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>bar<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>升级后，为你的 app 运行端对端测试 ，并关注关于多个根节点的<strong>console warnings</strong>。
</p></div>

<h2 id="生命周期钩子"><a href="#生命周期钩子" class="headerlink" title="生命周期钩子"></a>生命周期钩子</h2><h3 id="beforeCompile-移除"><a href="#beforeCompile-移除" class="headerlink" title="beforeCompile 移除"></a><code>beforeCompile</code> <sup>移除</sup></h3><p>用 <code>created</code> 钩子来代替。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到所有使用这个钩子的实例</p>
</div>

<h3 id="compiled-替换"><a href="#compiled-替换" class="headerlink" title="compiled 替换"></a><code>compiled</code> <sup>替换</sup></h3><p>用 <code>mounted</code> 钩子来代替。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到所有使用这个钩子的实例</p>
</div>

<h3 id="attached-移除"><a href="#attached-移除" class="headerlink" title="attached 移除"></a><code>attached</code> <sup>移除</sup></h3><p>依赖其它钩子使用自定义的 dom 内部方法，例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">attached: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  doSomething()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>现在可以这样做：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">mounted: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    doSomething()</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到所有使用这个钩子的实例</p>
</div>

<h3 id="detached-移除"><a href="#detached-移除" class="headerlink" title="detached 移除"></a><code>detached</code> <sup>移除</sup></h3><p>用自定义的 dom 内部的其他钩子代替，例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">detached: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  doSomething()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可以用以下方式代替：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">destroyed: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    doSomething()</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到所有使用这个钩子的实例</p>
</div>

<h3 id="init-换名"><a href="#init-换名" class="headerlink" title="init 换名"></a><code>init</code> <sup>换名</sup></h3><p>用新的 <code>beforeCreate</code> 钩子代替，他们本质上是一样的。为了与其他生命周期的钩子命名保持一致性，所以重新命名了这个钩子。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到所有使用这个钩子的实例</p>
</div>

<h3 id="ready-替换"><a href="#ready-替换" class="headerlink" title="ready 替换"></a><code>ready</code> <sup>替换</sup></h3><p>使用新的 <code>mounted</code> 钩子代替，应该注意的是，通过使用 <code>mounted</code> 钩子，并不能保证该实例已经插入文档。所以还应该在钩子函数中包含 <code>Vue.nextTick</code>/<code>vm.$nextTick</code> 例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">mounted: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// 保证 this.$el 已经插入文档</span></div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到所有使用这个钩子的实例</p>
</div>

<h2 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a><code>v-for</code></h2><h3 id="v-for-数组参数的顺序-改变"><a href="#v-for-数组参数的顺序-改变" class="headerlink" title="v-for 数组参数的顺序 改变"></a><code>v-for</code> 数组参数的顺序 <sup>改变</sup></h3><p>当含有 <code>index</code> 时，以前传递的参数顺序是：<code>(index, value)</code>。现在变成了：<code>(value, index)</code> ，这样可以与js的新数组方法：<code>forEach</code>，<code>map</code> 保持一致。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 来找到使用弃用参数顺序的实例。注意，该工具将不会标记以 <code>position</code> 或者 <code>num</code> 来命名 index 参数。</p>
</div>

<h3 id="v-for-对象参数的顺序-改变"><a href="#v-for-对象参数的顺序-改变" class="headerlink" title="v-for 对象参数的顺序 改变"></a><code>v-for</code> 对象参数的顺序 <sup>改变</sup></h3><p>当包含 <code>key</code> 时，对象的参数顺序是 <code>(key, value)</code>。现在改为了 <code>(value, key)</code>，这样可以和通用的对象迭代器（比如 lodash 的迭代器）保持一致。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 来找到使用弃用参数顺序的实例。注意，该工具将不会标记以 <code>name</code> 或者 <code>property</code> 来命名 key 参数。</p>
</div>

<h3 id="index-and-key-移除"><a href="#index-and-key-移除" class="headerlink" title="$index and $key 移除"></a><code>$index</code> and <code>$key</code> <sup>移除</sup></h3><p>隐式申明的 <code>$index</code> 的 <code>$key</code> 两个变量在新版里面已经弃用了，取代的是在 <code>v-for</code> 中显式地申明。这可以使无经验的 Vue 开发者更好地理解代码，同样也可以使得在处理嵌套循环时更加清晰。<br>
<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 来找到使用弃用变量的实例。如果有些没有找到，也可以参考<strong>控制台警告信息</strong> 比如 <code>Uncaught ReferenceError: $index is not defined</code></p>
</div>
</p>
<h3 id="track-by-替换"><a href="#track-by-替换" class="headerlink" title="track-by 替换"></a><code>track-by</code> <sup>替换</sup></h3><p><code>track-by</code> 被 <code>key</code>取代，和其他参数一样，如果没有 <code>v-bind</code>或者<code>:</code> 前缀，它将被作为一个字符串。大多数情况下， 我们想要能够动态绑定完整的表达式，而不是一个 key。例如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span> <span class="attr">track-by</span>=<span class="string">"id"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>现在应该写成：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span> <span class="attr">v-bind:key</span>=<span class="string">"item.id"</span>&gt;</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到含 <code>track-by</code>的实例。</p>
</div>

<h3 id="v-for-排序值-改变"><a href="#v-for-排序值-改变" class="headerlink" title="v-for 排序值 改变"></a><code>v-for</code> 排序值 <sup>改变</sup></h3><p>显然 <code>v-for=&quot;number in 10&quot;</code> 将使得 <code>number</code> 从0到9迭代，现在变成了从1到10。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>以正则 <code>/\w+ in \d+/</code>搜索整个代码，当出现在 <code>v-for</code>里面时，检查一下，对你是否有影响。</p>
</div>

<h2 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h2><h3 id="coerce-Prop的参数-移除"><a href="#coerce-Prop的参数-移除" class="headerlink" title="coerce Prop的参数 移除"></a><code>coerce</code> Prop的参数 <sup>移除</sup></h3><p>如果需要检查 prop 的值，创建一个内部的 computed 值，而不再在 props 内部去定义，例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">props: &#123;</div><div class="line">  <span class="attr">username</span>: &#123;</div><div class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</div><div class="line">    <span class="attr">coerce</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> value</div><div class="line">        .toLowerCase()</div><div class="line">        .replace(<span class="regexp">/\s+/</span>, <span class="string">'-'</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>现在应该写为：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">props: &#123;</div><div class="line">  <span class="attr">username</span>: <span class="built_in">String</span>,</div><div class="line">&#125;,</div><div class="line"><span class="attr">computed</span>: &#123;</div><div class="line">  <span class="attr">normalizedUsername</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.username</div><div class="line">      .toLowerCase()</div><div class="line">      .replace(<span class="regexp">/\s+/</span>, <span class="string">'-'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样有一些好处：</p>
<ul>
<li>你可以对保持原始 prop 值的操作权限。</li>
<li>通过给予验证后的值一个不同的命名，强制开发者使用显式申明。</li>
</ul>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找出包含 <code>coerce</code> 选项的实例。</p>
</div>

<h3 id="twoWay-Prop-的参数-移除"><a href="#twoWay-Prop-的参数-移除" class="headerlink" title="twoWay Prop 的参数 移除"></a><code>twoWay</code> Prop 的参数 <sup>移除</sup></h3><p>Props 现在只能单项传递。为了对父组件产生反向影响，子组件需要显式地传递一个事件而不是依赖于隐式地双向绑定。详见：</p>
<ul>
<li><a href="components.html#Custom-Events">自定义组件事件</a></li>
<li><a href="components.html#Form-Input-Components-using-Custom-Events">自定义输入组件</a> (使用组件事件)</li>
<li><a href="state-management.html">全局状态管理</a></li>
</ul>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a>工具，找出含有 <code>twoWay</code> 参数的实例。</p>
</div>

<h3 id="v-bind-的-once和-sync-修饰符-移除"><a href="#v-bind-的-once和-sync-修饰符-移除" class="headerlink" title="v-bind 的 .once和.sync 修饰符 移除"></a><code>v-bind</code> 的 <code>.once</code>和<code>.sync</code> 修饰符 <sup>移除</sup></h3><p>Props 现在只能单向传递。为了对父组件产生反向影响，子组件需要显式地传递一个事件而不是依赖于隐式地双向绑定。详见：</p>
<ul>
<li><a href="components.html#Custom-Events">自定义组件事件</a></li>
<li><a href="components.html#Form-Input-Components-using-Custom-Events">自定义输入组件</a> (使用组件事件)</li>
<li><a href="state-management.html">全局状态管理</a></li>
</ul>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到使用 <code>.once</code> 和 <code>.sync</code> 修饰符的实例。</p>
</div>

<h3 id="修改-Props-弃用"><a href="#修改-Props-弃用" class="headerlink" title="修改 Props 弃用"></a>修改 Props <sup>弃用</sup></h3><p>组件内修改 prop 是反模式（不推荐的）的。比如，先声明一个 prop ，然后在组件中通过 <code>this.myProp = &#39;someOtherValue&#39;</code> 改变 prop 的值。根据渲染机制，当父组件重新渲染时，子组件的内部 prop 值也将被覆盖。</p>
<p>大多数情况下，改变 prop 值可以用以下选项代替：</p>
<ul>
<li>通过 data 属性，用prop去设置一个data属性的默认值。</li>
<li>通过 computed 属性。</li>
</ul>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行端对端测试，查看关于 prop 修改的<strong>控制台警告信息</strong>。</p>
</div>

<h3 id="根实例的-Props-替换"><a href="#根实例的-Props-替换" class="headerlink" title="根实例的 Props 替换"></a>根实例的 Props <sup>替换</sup></h3><p>对于一个根实例来说 (比如：用 <code>new Vue({ ... })</code> 创建的实例)，只能用 <code>propsData</code> 而不是 <code>props</code> 。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行端对端测试，将会弹出 <strong>failed tests</strong> 来通知你使用 <code>props</code> 的根实例已经失效。</p>
</div>

<h2 id="Built-In-指令"><a href="#Built-In-指令" class="headerlink" title="Built-In 指令"></a>Built-In 指令</h2><h3 id="v-bind-真-假值-改变"><a href="#v-bind-真-假值-改变" class="headerlink" title="v-bind 真/假值 改变"></a><code>v-bind</code> 真/假值 <sup>改变</sup></h3><p>在2.0中使用 <code>v-bind</code> 时，只有 <code>null</code>, <code>undefined</code> , 和 <code>false</code> 被看作是假。这意味着，<code>0</code> 和空字符串将被作为真值渲染。比如 <code>v-bind:draggable=&quot;&#39;&#39;&quot;</code> 将被渲染为 <code>draggable=&quot;true&quot;</code>。</p>
<p>对于枚举属性，除了以上假值之外，字符串 <code>&quot;false&quot;</code> 也会被渲染为 <code>attr=&quot;false&quot;</code>。</p>
<p class="tip">注意，对于其它钩子 (如 <code>v-if</code> 和 <code>v-show</code>)， 他们依然遵循 js 对真假值判断的一般规则。</p>


<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行端到端测试，如果你app的任何部分有可能被这个升级影响到，将会弹出<strong>failed tests</strong></p>
</div>

<h3 id="用-v-on-监听原生事件-改变"><a href="#用-v-on-监听原生事件-改变" class="headerlink" title="用 v-on 监听原生事件 改变"></a>用 <code>v-on</code> 监听原生事件 <sup>改变</sup></h3><p>  现在在组件上使用 <code>v-on</code> 只会监听自定义事件（组件用 <code>$emit</code> 触发的事件）。如果要监听根元素的原生事件，可以使用 <code>.native</code> 修饰符，比如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">my-component</span> <span class="attr">v-on:click.native</span>=<span class="string">"doSomething"</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行端对端测试，如果你app的任何部分有可能被这个升级影响到，将会弹出<strong>failed tests</strong> </p>
</div>

<h3 id="带有-debounce-的-v-model移除"><a href="#带有-debounce-的-v-model移除" class="headerlink" title="带有 debounce 的 v-model移除"></a>带有 <code>debounce</code> 的 <code>v-model</code><sup>移除</sup></h3><p>Debouncing 曾经被用来控制 Ajax 请求及其它高耗任务的频率。 Vue 中<code>v-model</code>的 <code>debounce</code> 属性参数使得在一些简单情况下非常容易实现这种控制。但实际上，这是控制了 <strong>状态更新</strong> 的频率，而不是控制高耗时任务本身。这是个微小的差别，但是会随着应用增长而显现出局限性。</p>
<p>例如在设计一个搜索提示时的局限性：</p>

<script src="https://cdn.jsdelivr.net/lodash/4.13.1/lodash.js"></script>
<div id="debounce-search-demo" class="demo">
  <input v-model="searchQuery" placeholder="Type something">
  <strong>{{ searchIndicator }}</strong>
</div>
<script>
new Vue({
  el: '#debounce-search-demo',
  data: {
    searchQuery: '',
    searchQueryIsDirty: false,
    isCalculating: false
  },
  computed: {
    searchIndicator: function () {
      if (this.isCalculating) {
        return '⟳ Fetching new results'
      } else if (this.searchQueryIsDirty) {
        return '... Typing'
      } else {
        return '✓ Done'
      }
    }
  },
  watch: {
    searchQuery: function () {
      this.searchQueryIsDirty = true
      this.expensiveOperation()
    }
  },
  methods: {
    expensiveOperation: _.debounce(function () {
      this.isCalculating = true
      setTimeout(function () {
        this.isCalculating = false
        this.searchQueryIsDirty = false
      }.bind(this), 1000)
    }, 500)
  }
})
</script>

<p>使用 <code>debounce</code> 参数，便无法观察 “Typing” 的状态。因为无法对输入状态进行实时检测。然而，通过将 <code>debounce</code> 与 Vue 解耦，可以仅仅只延迟我们想要控制的操作，从而避开这些局限性：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="comment">&lt;!--</span></div><div class="line">通过使用lodash或者其它库的debounce函数，</div><div class="line">我们相信 debounce 实现是一流的，</div><div class="line">并且可以随处使用它，不仅仅是在模板中。</div><div class="line">--&gt;</div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/lodash/4.13.1/lodash.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"debounce-search-demo"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"searchQuery"</span> <span class="attr">placeholder</span>=<span class="string">"Type something"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123; searchIndicator &#125;&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#debounce-search-demo'</span>,</div><div class="line">  <span class="attr">data</span>: &#123;</div><div class="line">    <span class="attr">searchQuery</span>: <span class="string">''</span>,</div><div class="line">    <span class="attr">searchQueryIsDirty</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">isCalculating</span>: <span class="literal">false</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">computed</span>: &#123;</div><div class="line">    <span class="attr">searchIndicator</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.isCalculating) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">'⟳ Fetching new results'</span></div><div class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.searchQueryIsDirty) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">'... Typing'</span></div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">'✓ Done'</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">watch</span>: &#123;</div><div class="line">    <span class="attr">searchQuery</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.searchQueryIsDirty = <span class="literal">true</span></div><div class="line">      <span class="keyword">this</span>.expensiveOperation()</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">methods</span>: &#123;</div><div class="line">    <span class="comment">// 这是 debounce 实现的地方。</span></div><div class="line">    expensiveOperation: _.debounce(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.isCalculating = <span class="literal">true</span></div><div class="line">      setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.isCalculating = <span class="literal">false</span></div><div class="line">        <span class="keyword">this</span>.searchQueryIsDirty = <span class="literal">false</span></div><div class="line">      &#125;.bind(<span class="keyword">this</span>), <span class="number">1000</span>)</div><div class="line">    &#125;, <span class="number">500</span>)</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>这种方式的另外一个优点是：当包裹函数执行时间与延时时间相当时，将会等待较长时间。比如，当给出搜索建议时，要等待用户输入停止一段时间后才给出建议，这个体验非常差。其实，这时候更适合用 <strong>throttling</strong> 函数。因为现在你可以自由的使用类似 lodash 之类的库，所以很快就可以用 throttling 重构项目。</p>

<div class="upgrade-path">
  <h4>Upgrade Path</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找出使用 <code>debounce</code> 参数的 实例。</p>
</div>

<h3 id="使用-lazy-或者-number-参数的-v-model-。-替换"><a href="#使用-lazy-或者-number-参数的-v-model-。-替换" class="headerlink" title="使用 lazy 或者 number 参数的 v-model 。 替换"></a>使用 <code>lazy</code> 或者 <code>number</code> 参数的 <code>v-model</code> 。 <sup>替换</sup></h3><p><code>lazy</code> 和 <code>number</code> 参数现在以修饰符的形式使用，这样看起来更加清晰，而不是这样：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"name"</span> <span class="attr">lazy</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"age"</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">number</span>&gt;</span></div></pre></td></tr></table></figure>
<p>现在写成这样：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model.lazy</span>=<span class="string">"name"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model.number</span>=<span class="string">"age"</span> <span class="attr">type</span>=<span class="string">"number"</span>&gt;</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a>工具找到这些弃用参数。</p>
</div>

<h3 id="使用内联-value的v-model-移除"><a href="#使用内联-value的v-model-移除" class="headerlink" title="使用内联 value的v-model  移除"></a>使用内联 <code>value</code>的<code>v-model</code>  <sup>移除</sup></h3><p><code>v-model</code> 不再以内联 <code>value</code> 方式初始化的初值了，显然他将以实例的 data 相应的属性作为真正的初值。</p>
<p>这意味着以下元素：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"foo"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在data选项中有下面写法的：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">data: &#123;</div><div class="line">  <span class="attr">text</span>: <span class="string">'bar'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>将渲染 model 为 ‘bar’ 而不是 ‘foo’ 。同样，对 <code>&lt;textarea&gt;</code> 已有的值来说：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">v-model</span>=<span class="string">"text"</span>&gt;</span></div><div class="line">  hello world</div><div class="line"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div></pre></td></tr></table></figure>
<p>必须保证 <code>text</code> 初值为 “hello world”</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>升级后运行端对端测试，注意关于<code>v-model</code>内联参数的 <strong>console warnings</strong></p>
</div>

<h3 id="v-model-with-v-for-Iterated-Primitive-Values-移除"><a href="#v-model-with-v-for-Iterated-Primitive-Values-移除" class="headerlink" title="v-model with v-for Iterated Primitive Values 移除"></a><code>v-model</code> with <code>v-for</code> Iterated Primitive Values <sup>移除</sup></h3><p>像这样的写法将失效：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-for</span>=<span class="string">"str in strings"</span> <span class="attr">v-model</span>=<span class="string">"str"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>因为 <code>&lt;input&gt;</code> 将被编译成类似下面的 js 代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">strings.map(<span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> createElement(<span class="string">'input'</span>, ...)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>这样，<code>v-model</code> 的双向绑定在这里就失效了。把 <code>str</code> 赋值给迭代器里的另一个值也没有用，因为它仅仅是函数内部的一个变量。</p>
<p>替代方案是，你可以使用对象数组，这样<code>v-model</code> 就可以同步更新对象里面的字段了，例如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-for</span>=<span class="string">"obj in objects"</span> <span class="attr">v-model</span>=<span class="string">"obj.str"</span>&gt;</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行测试，如果你的 app 有地方被这个更新影响到的话将会弹出<strong>failed tests</strong>提示。</p>
</div>

<h3 id="带有-important-的v-bind-style-移除"><a href="#带有-important-的v-bind-style-移除" class="headerlink" title="带有 !important 的v-bind:style  移除"></a>带有 <code>!important</code> 的<code>v-bind:style</code>  <sup>移除</sup></h3><p>这样写将失效：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-bind:style</span>=<span class="string">"&#123; color: myColor + ' !important' &#125;"</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p>如果确实需要覆盖其它的 <code>!important</code>，最好用字符串形式去写：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-bind:style</span>=<span class="string">"'color: ' + myColor + ' !important'"</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external"> 迁移帮助工具。</a>找到含有 <code>!important</code> 的style绑定对象。</p>
</div>

<h3 id="v-el-和v-ref-替换"><a href="#v-el-和v-ref-替换" class="headerlink" title="v-el 和v-ref 替换"></a><code>v-el</code> 和<code>v-ref</code> <sup>替换</sup></h3><p>简单起见， <code>v-el</code> 和 <code>v-ref</code> 合并为一个 <code>ref</code> 属性了，可以在组件实例中通过 <code>$refs</code> 来调用。这意味着 <code>v-el:my-element</code> 将写成这样： <code>ref=&quot;myElement&quot;</code>， <code>v-ref:my-component</code> 变成了这样： <code>ref=&quot;myComponent&quot;</code>。绑定在一般元素上时，<code>ref</code> 指DOM元素，绑定在组件上时，<code>ref</code> 为一组件实例。<br>因为 <code>v-ref</code> 不再是一个指令了而是一个特殊的属性，它也可以被动态定义了。这样在和<code>v-for</code> 结合的时候是很有用的：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span> <span class="attr">v-bind:ref</span>=<span class="string">"'item' + item.id"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p>以前 <code>v-el</code>/<code>v-ref</code> 和 <code>v-for</code> 一起使用将产生一个DOM数组或者组件数组，因为没法给每个元素一个特定名字。现在你还仍然可以这样做，给每个元素一个同样的<code>ref</code>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span> <span class="attr">ref</span>=<span class="string">"items"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p>和 1.x 中不同， <code>$refs</code> 不是响应的，因为它们在渲染过程中注册/更新。只有监听变化并重复渲染才能使它们响应。</p>
<p>另一方面，设计<code>$refs</code>主要是提供给 js 程序访问的，并不建议在模板中过度依赖使用它。因为这意味着在实例之外去访问实例状态，违背了 Vue 数据驱动的思想。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找出实例中的 <code>v-el</code> 和 <code>v-ref</code> 。</p>
</div>

<h3 id="v-show后面使用v-else-移除"><a href="#v-show后面使用v-else-移除" class="headerlink" title="v-show后面使用v-else 移除"></a><code>v-show</code>后面使用<code>v-else</code> <sup>移除</sup></h3><p><code>v-else</code> 不能再跟在 <code>v-show</code>后面使用。请在<code>v-if</code>的否定分支中使用<code>v-show</code>来代替。例如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"foo"</span>&gt;</span>Foo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span> <span class="attr">v-show</span>=<span class="string">"bar"</span>&gt;</span>Not foo, but bar<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p>现在应该写出这样：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"foo"</span>&gt;</span>Foo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"!foo &amp;&amp; bar"</span>&gt;</span>Not foo, but bar<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找出实例中存在的 <code>v-else</code> 以及 <code>v-show</code>。</p>
</div>

<h2 id="自定义指令-简化"><a href="#自定义指令-简化" class="headerlink" title="自定义指令 简化"></a>自定义指令 <sup>简化</sup></h2><p>在新版中，指令的使用范围已经大大减小了：现在指令仅仅被用于低级的 DOM 操作。大多数情况下，最好是把模板作为代码复用的抽象层。</p>
<p>显要的改变有如下几点：</p>
<ul>
<li>指令不再拥有实例。意思是，在指令的钩子函数中不再拥有实例的 <code>this</code> 。替代的是，你可以在参数中接受你需要的任何数据。如果确实需要，可以通过 <code>el</code> 来访问实例。</li>
<li>类似 <code>acceptStatement</code> ，<code>deep</code> ， <code>priority</code> 等都已被弃用。为了替换<code>双向</code>指令，见 <a href="#Two-Way-Filters-deprecated">示例</a>。</li>
<li>现在有些钩子的意义和以前不一样了，并且多了两个钩子函数。</li>
</ul>
<p>幸运的是，新钩子更加简单，更加容易掌握。详见 <a href="custom-directive.html">自定义指令指南</a>。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到定义指令的地方。在 helper 工具会把这些地方标记出来，因为很有可能这些地方需要重构。</p>
</div>

<h3 id="指令-literal-修饰符-移除"><a href="#指令-literal-修饰符-移除" class="headerlink" title="指令 .literal 修饰符 移除"></a>指令 <code>.literal</code> 修饰符 <sup>移除</sup></h3><p><code>.literal</code> 修饰符已经被移除，为了获取一样的功能，可以简单地提供字符串修饰符作为值。</p>
<p>示例，如下更改：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">&lt;p v-my-directive.literal=<span class="string">"foo bar baz"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p>只是：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-my-directive</span>=<span class="string">"'foo bar baz'"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到实例中使用 `.literal` 修饰符的地方。</p>
</div>

<h2 id="过渡"><a href="#过渡" class="headerlink" title="过渡"></a>过渡</h2><h3 id="transition-参数-替换"><a href="#transition-参数-替换" class="headerlink" title="transition 参数 替换"></a><code>transition</code> 参数 <sup>替换</sup></h3><p>Vue 的过渡系统有了彻底的改变，现在通过使用 <code>&lt;transition&gt;</code> 和 <code>&lt;transition-group&gt;</code> 来包裹元素实现过渡效果，而不再使用 <code>transition</code> 属性。详见 <a href="transitions.html">Transitions guide</a>。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到使用 <code>transition</code> 属性的地方。</p>
</div>

<h3 id="可复用的过渡-Vue-transition-替换"><a href="#可复用的过渡-Vue-transition-替换" class="headerlink" title="可复用的过渡 Vue.transition 替换"></a>可复用的过渡 <code>Vue.transition</code> <sup>替换</sup></h3><p>在新的过渡系统中，可以<a href="transitions.html#Reusable-Transitions">通过模板复用过渡效果</a>。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到使用 <code>transition</code> 属性的地方。</p>
</div>

<h3 id="过渡的-stagger-参数-移除"><a href="#过渡的-stagger-参数-移除" class="headerlink" title="过渡的 stagger 参数 移除"></a>过渡的 <code>stagger</code> 参数 <sup>移除</sup></h3><p>如果希望在列表渲染中使用渐近过渡，可以通过设置元素的 <code>data-index</code> （或类似属性）来控制时间。 请参考<a href="transitions.html#Staggering-List-Transitions">这个例子</a>。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到使用 <code>transition</code> 属性的地方。升级期间，你可以“过渡”到新的过渡策略。</p>
</div>

<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><h3 id="events-选项-移除"><a href="#events-选项-移除" class="headerlink" title="events 选项 移除"></a><code>events</code> 选项 <sup>移除</sup></h3><p><code>events</code> 选项被弃用。事件处理器现在在 <code>created</code> 钩子中被注册。参考详细示例 <a href="#dispatch-and-broadcast-deprecated"><code>$dispatch</code> and <code>$broadcast</code> 迁移指南</a></p>
<h3 id="Vue-directive-39-on-39-keyCodes-替换"><a href="#Vue-directive-39-on-39-keyCodes-替换" class="headerlink" title="Vue.directive(&#39;on&#39;).keyCodes 替换"></a><code>Vue.directive(&#39;on&#39;).keyCodes</code> <sup>替换</sup></h3><p>新的简明配置 <code>keyCodes</code> 的方式是通过 <code>Vue.config.keyCodes</code>例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// v-on:keyup.f1 不可用</span></div><div class="line">Vue.config.keyCodes.f1 = <span class="number">112</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到过时的 <code>keyCode</code> 配置</p>
</div>

<h3 id="dispatch-和-broadcast-替换"><a href="#dispatch-和-broadcast-替换" class="headerlink" title="$dispatch 和 $broadcast 替换"></a><code>$dispatch</code> 和 <code>$broadcast</code> <sup>替换</sup></h3><p><code>$dispatch</code> 和 <code>$broadcast</code> 已经被弃用。请使用更多简明清晰的组件间通信和更好的状态管理方案，如：<a href="https://github.com/vuejs/vuex" target="_blank" rel="external">Vuex</a>.</p>
<p>因为基于组件树结构的事件流方式实在是让人难以理解，并且在组件结构扩展的过程中会变得越来越脆弱。这种事件方式确实不太好，我们也不希望在以后让开发者们太痛苦。并且<code>$dispatch</code> 和 <code>$broadcast</code> 也没有解决兄弟组件间的通信问题。</p>
<p>对于<code>$dispatch</code> 和 <code>$broadcast</code>最简单的升级方式就是：通过使用事件中心，允许组件自由交流，无论组件处于组件树的哪一层。由于 Vue 实例实现了一个事件分发接口，你可以通过实例化一个空的 Vue 实例来实现这个目的。</p>
<p>这些方法的最常见用途之一是父子组件的相互通信。在这些情况下，你可以使用 <a href="components.html#Form-Input-Components-using-Custom-Events"><code>v-on</code>监听子组件上 $emit 的变化</a>。这可以允许你很方便的添加事件显性。</p>
<p>然而，如果是跨多层父子组件通信的话， <code>$emit</code> 并没有什么用。相反，用集中式的事件中间件可以做到简单的升级。这会让组件之间的通信非常顺利，即使是兄弟组件。因为 Vue 通过事件发射器接口执行实例，实际上你可以使用一个空的 Vue 实例。</p>
<p>比如，假设我们有个 todo 的应用结构如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Todos</div><div class="line">|-- NewTodoInput</div><div class="line">|-- Todo</div><div class="line">    |-- DeleteTodoButton</div></pre></td></tr></table></figure>
<p>可以通过单独的事件中心管理组件间的通信：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 将在各处使用该事件中心</span></div><div class="line"><span class="comment">// 组件通过它来通信</span></div><div class="line"><span class="keyword">var</span> eventHub = <span class="keyword">new</span> Vue()</div></pre></td></tr></table></figure>
<p>然后在组件中，可以使用 <code>$emit</code>, <code>$on</code>, <code>$off</code> 分别来分发、监听、取消监听事件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// NewTodoInput</span></div><div class="line"><span class="comment">// ...</span></div><div class="line">methods: &#123;</div><div class="line">  <span class="attr">addTodo</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    eventHub.$emit(<span class="string">'add-todo'</span>, &#123; <span class="attr">text</span>: <span class="keyword">this</span>.newTodoText &#125;)</div><div class="line">    <span class="keyword">this</span>.newTodoText = <span class="string">''</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// DeleteTodoButton</span></div><div class="line"><span class="comment">// ...</span></div><div class="line">methods: &#123;</div><div class="line">  <span class="attr">deleteTodo</span>: <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</div><div class="line">    eventHub.$emit(<span class="string">'delete-todo'</span>, id)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Todos</span></div><div class="line"><span class="comment">// ...</span></div><div class="line">created: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  eventHub.$on(<span class="string">'add-todo'</span>, <span class="keyword">this</span>.addTodo)</div><div class="line">  eventHub.$on(<span class="string">'delete-todo'</span>, <span class="keyword">this</span>.deleteTodo)</div><div class="line">&#125;,</div><div class="line"><span class="comment">// 最好在组件销毁前</span></div><div class="line"><span class="comment">// 清除事件监听</span></div><div class="line">beforeDestroy: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  eventHub.$off(<span class="string">'add-todo'</span>, <span class="keyword">this</span>.addTodo)</div><div class="line">  eventHub.$off(<span class="string">'delete-todo'</span>, <span class="keyword">this</span>.deleteTodo)</div><div class="line">&#125;,</div><div class="line"><span class="attr">methods</span>: &#123;</div><div class="line">  <span class="attr">addTodo</span>: <span class="function"><span class="keyword">function</span> (<span class="params">newTodo</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.todos.push(newTodo)</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">deleteTodo</span>: <span class="function"><span class="keyword">function</span> (<span class="params">todoId</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.todos = <span class="keyword">this</span>.todos.filter(<span class="function"><span class="keyword">function</span> (<span class="params">todo</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> todo.id !== todoId</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在简单的情况下这样做可以代替 <code>$dispatch</code> 和 <code>$broadcast</code>，但是对于大多数复杂情况，更推荐使用一个专用的状态管理层如：<a href="https://github.com/vuejs/vuex" target="_blank" rel="external">Vuex</a> 。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找出使用 <code>$dispatch</code> 和 <code>$broadcast</code>的实例。</p>
</div>

<h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><h3 id="插入文本之外的过滤器-移除"><a href="#插入文本之外的过滤器-移除" class="headerlink" title="插入文本之外的过滤器 移除"></a>插入文本之外的过滤器 <sup>移除</sup></h3><p>现在过滤器只能用在插入文本中 (<code>{{ }}</code> tags)。我们发现在指令（如：<code>v-model</code>， <code>v-on</code>等）中使用过滤器使事情变得更复杂。像<code>v-for</code> 这样的列表过滤器最好把处理逻辑作为一个计算属性放在js里面，这样就可以在整个模板中复用。</p>
<p>总之，能在原生js中实现的东西，我们尽量避免引入一个新的符号去重复处理同样的问题。下面是如何替换 Vue 内置过滤器：</p>
<h4 id="替换-debounce-过滤器"><a href="#替换-debounce-过滤器" class="headerlink" title="替换 debounce 过滤器"></a>替换 <code>debounce</code> 过滤器</h4><p>不再这样写</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup</span>=<span class="string">"doStuff | debounce 500"</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">methods: &#123;</div><div class="line">  <span class="attr">doStuff</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>请使用 <a href="https://lodash.com/docs/4.15.0#debounce" target="_blank" rel="external">lodash’s <code>debounce</code></a> (也有可能是 <a href="https://lodash.com/docs/4.15.0#throttle" target="_blank" rel="external"><code>throttle</code></a>) 来直接控制高耗任务。可以这样来实现上面的功能：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup</span>=<span class="string">"doStuff"</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">methods: &#123;</div><div class="line">  <span class="attr">doStuff</span>: _.debounce(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;, <span class="number">500</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这种写法的更多优点详见： <a href="#v-model-with-debounce-removed"><code>v-model</code> 示例</a>.</p>
<h4 id="替换-limitBy-过滤器"><a href="#替换-limitBy-过滤器" class="headerlink" title="替换 limitBy 过滤器"></a>替换 <code>limitBy</code> 过滤器</h4><p>不再这样写：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"item in items | limitBy 10"</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在 computed 属性中使用js内置方法： <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice#Examples" target="_blank" rel="external"><code>.slice</code> method</a>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"item in filteredItems"</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  <span class="attr">filteredItems</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.slice(<span class="number">0</span>, <span class="number">10</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="替换-filterBy-过滤器"><a href="#替换-filterBy-过滤器" class="headerlink" title="替换 filterBy 过滤器"></a>替换 <code>filterBy</code> 过滤器</h4><p>不再这样写：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"user in users | filterBy searchQuery in 'name'"</span>&gt;</span>&#123;&#123; user.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在 computed 属性中使用js内置方法 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter#Examples" target="_blank" rel="external"><code>.filter</code> method</a>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"user in filteredUsers"</span>&gt;</span>&#123;&#123; user.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  <span class="attr">filteredUsers</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span></div><div class="line">    <span class="keyword">return</span> self.users.filter(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> user.name.indexOf(self.searchQuery) !== <span class="number">-1</span></div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>js原生的 <code>.filter</code> 同样能实现很多复杂的过滤器操作，因为可以在计算 computed 属性中使用所有js方法。比如，想要通过匹配用户名字和电子邮箱地址（不区分大小写）找到用户：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> self = <span class="keyword">this</span></div><div class="line">self.users.filter(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> searchRegex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(self.searchQuery, <span class="string">'i'</span>)</div><div class="line">  <span class="keyword">return</span> user.isActive &amp;&amp; (</div><div class="line">    searchRegex.test(user.name) ||</div><div class="line">    searchRegex.test(user.email)</div><div class="line">  )</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h4 id="替换-orderBy-过滤器"><a href="#替换-orderBy-过滤器" class="headerlink" title="替换 orderBy 过滤器"></a>替换 <code>orderBy</code> 过滤器</h4><p>不这样写：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"user in users | orderBy 'name'"</span>&gt;</span>&#123;&#123; user.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p>而是在 computed 属性中使用 <a href="https://lodash.com/docs/4.15.0#orderBy" target="_blank" rel="external">lodash’s <code>orderBy</code></a> (或者可能是 <a href="https://lodash.com/docs/4.15.0#sortBy" target="_blank" rel="external"><code>sortBy</code></a>)：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"user in orderedUsers"</span>&gt;</span>&#123;&#123; user.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  <span class="attr">orderedUsers</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> _.orderBy(<span class="keyword">this</span>.users, <span class="string">'name'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>甚至可以字段排序：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">_.orderBy(<span class="keyword">this</span>.users, [<span class="string">'name'</span>, <span class="string">'last_login'</span>], [<span class="string">'asc'</span>, <span class="string">'desc'</span>])</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到指令中使用的过滤器。如果有些没找到，看看<strong>控制台错误信息</strong>。</p>
</div>

<h3 id="过滤器参数符号-改变"><a href="#过滤器参数符号-改变" class="headerlink" title="过滤器参数符号 改变"></a>过滤器参数符号 <sup>改变</sup></h3><p>现在过滤器参数形式可以更好地与js函数调用方式一致，因此不用再用空格分隔参数：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; date | formatDate 'YY-MM-DD' timeZone &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p>现在用圆括号括起来并用逗号分隔：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; date | formatDate('YY-MM-DD', timeZone) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到老式的调用符号，如果有遗漏，请看<strong>控制台错误信息</strong>。</p>
</div>

<h3 id="内置文本过滤器-移除"><a href="#内置文本过滤器-移除" class="headerlink" title="内置文本过滤器 移除"></a>内置文本过滤器 <sup>移除</sup></h3><p>尽管插入文本内部的过滤器依然有效，但是所有内置过滤器已经移除了。取代的是，推荐在每个区域使用更专业的库来解决。(比如用 <a href="https://date-fns.org/" target="_blank" rel="external"><code>date-fns</code></a> 来格式化日期，用 <a href="http://openexchangerates.github.io/accounting.js/" target="_blank" rel="external"><code>accounting</code></a> 来格式化货币)。</p>
<p>对于每个内置过滤器，我们大概总结了下该怎么替换。代码示例可能写在自定义 helper 函数，方法或计算属性中。</p>
<h4 id="替换-json-过滤器"><a href="#替换-json-过滤器" class="headerlink" title="替换 json 过滤器"></a>替换 <code>json</code> 过滤器</h4><p>不用一个个改，因为Vue已经帮你自动格式化好了，无论是字符串，数字还是数组，对象。如果想用js的 <code>JSON.stringify</code> 功能去实现，你也可以把它写在方法或者计算属性里面。</p>
<h4 id="替换-capitalize-过滤器"><a href="#替换-capitalize-过滤器" class="headerlink" title="替换 capitalize 过滤器"></a>替换 <code>capitalize</code> 过滤器</h4><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">text[<span class="number">0</span>].toUpperCase() + text.slice(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<h4 id="替换-uppercase-过滤器"><a href="#替换-uppercase-过滤器" class="headerlink" title="替换 uppercase 过滤器"></a>替换 <code>uppercase</code> 过滤器</h4><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">text.toUpperCase()</div></pre></td></tr></table></figure>
<h4 id="替换-lowercase-过滤器"><a href="#替换-lowercase-过滤器" class="headerlink" title="替换 lowercase 过滤器"></a>替换 <code>lowercase</code> 过滤器</h4><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">text.toLowerCase()</div></pre></td></tr></table></figure>
<h4 id="替换-pluralize-过滤器"><a href="#替换-pluralize-过滤器" class="headerlink" title="替换 pluralize 过滤器"></a>替换 <code>pluralize</code> 过滤器</h4><p>NPM 上的 <a href="https://www.npmjs.com/package/pluralize" target="_blank" rel="external">pluralize</a> 库可以很好的实现这个功能。如果仅仅想将特定的词格式化成复数形式或者想给特定的值（’0’）指定特定的输出，也可以很容易地自定义复数格式化过滤器：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">pluralizeKnife</span> (<span class="params">count</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (count === <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'no knives'</span></div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (count === <span class="number">1</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'1 knife'</span></div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span> count + <span class="string">'knives'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Replacing-the-currency-Filter"><a href="#Replacing-the-currency-Filter" class="headerlink" title="Replacing the currency Filter"></a>Replacing the <code>currency</code> Filter</h4><p>对于简单的问题,可以这样做：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="string">'$'</span> + price.toFixed(<span class="number">2</span>)</div></pre></td></tr></table></figure>
<p>大多数情况下，仍然会有奇怪的现象(比如 <code>0.035.toFixed(2)</code> 向上取舍得到 <code>0.04</code>,但是 <code>0.045</code> 向下取舍却也得到 <code>0.04</code>)。解决这些问题可以使用 <a href="http://openexchangerates.github.io/accounting.js/" target="_blank" rel="external"><code>accounting</code></a> 库来实现更多可靠的货币格式化。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到舍弃的过滤器。如果有些遗漏，请参考<strong>控制台错误信息</strong>。</p>
</div>

<h3 id="Two-Way-Filters-replaced"><a href="#Two-Way-Filters-replaced" class="headerlink" title="Two-Way Filters replaced"></a>Two-Way Filters <sup>replaced</sup></h3><p>Some users have enjoyed using two-way filters with <code>v-model</code> to create interesting inputs with very little code. While <em>seemingly</em> simple however, two-way filters can also hide a great deal of complexity - and even encourage poor UX by delaying state updates. Instead, components wrapping an input are recommended as a more explicit and feature-rich way of creating custom inputs.</p>
<p>As an example, we’ll now walk the migration of a two-way currency filter:</p>
<iframe width="100%" height="300" src="https://jsfiddle.net/chrisvfritz/6744xnjk/embedded/js,html,result" allowfullscreen="allowfullscreen" frameborder="0"></iframe>

<p>It mostly works well, but the delayed state updates can cause strange behavior. For example, click on the <code>Result</code> tab and try entering <code>9.999</code> into one of those inputs. When the input loses focus, its value will update to <code>$10.00</code>. When looking at the calculated total however, you’ll see that <code>9.999</code> is what’s stored in our data. The version of reality that the user sees is out of sync!</p>
<p>To start transitioning towards a more robust solution using Vue 2.0, let’s first wrap this filter in a new <code>&lt;currency-input&gt;</code> component:</p>
<iframe width="100%" height="300" src="https://jsfiddle.net/chrisvfritz/943zfbsh/embedded/js,html,result" allowfullscreen="allowfullscreen" frameborder="0"></iframe>

<p>This allows us add behavior that a filter alone couldn’t encapsulate, such as selecting the content of an input on focus. Now the next step will be to extract the business logic from the filter. Below, we pull everything out into an external <a href="https://gist.github.com/chrisvfritz/5f0a639590d6e648933416f90ba7ae4e" target="_blank" rel="external"><code>currencyValidator</code> object</a>:</p>
<iframe width="100%" height="300" src="https://jsfiddle.net/chrisvfritz/9c32kev2/embedded/js,html,result" allowfullscreen="allowfullscreen" frameborder="0"></iframe>

<p>This increased modularity not only makes it easier to migrate to Vue 2, but also allows currency parsing and formatting to be:</p>
<ul>
<li>unit tested in isolation from your Vue code</li>
<li>used by other parts of your application, such as to validate the payload to an API endpoint</li>
</ul>
<p>Having this validator extracted out, we’ve also more comfortably built it up into a more robust solution. The state quirks have been eliminated and it’s actually impossible for users to enter anything wrong, similar to what the browser’s native number input tries to do.</p>
<p>We’re still limited however, by filters and by Vue 1.0 in general, so let’s complete the upgrade to Vue 2.0:</p>
<iframe width="100%" height="300" src="https://jsfiddle.net/chrisvfritz/1oqjojjx/embedded/js,html,result" allowfullscreen="allowfullscreen" frameborder="0"></iframe>

<p>You may notice that:</p>
<ul>
<li>Every aspect of our input is more explicit, using lifecycle hooks and DOM events in place of the hidden behavior of two-way filters.</li>
<li>We can now use <code>v-model</code> directly on our custom inputs, which is not only more consistent with normal inputs, but also means our component is Vuex-friendly.</li>
<li>Since we’re no longer using filter options that require a value to be returned, our currency work could actually be done asynchronously. That means if we had a lot of apps that had to work with currencies, we could easily refactor this logic into a shared microservice.</li>
</ul>

<div class="upgrade-path">
  <h4>Upgrade Path</h4>
  <p>Run the <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> on your codebase to find examples of filters used in directives like <code>v-model</code>. If you miss any, you should also see <strong>console errors</strong>.</p>
</div>

<h2 id="Slots"><a href="#Slots" class="headerlink" title="Slots"></a>Slots</h2><h3 id="重名的-Slots-移除"><a href="#重名的-Slots-移除" class="headerlink" title="重名的 Slots 移除"></a>重名的 Slots <sup>移除</sup></h3><p>同一模板中的重名 <code>&lt;slot&gt;</code> 已经弃用。当一个 slot 已经被渲染过了，那么就不能在同一模板其它地方被再次渲染了。如果要在不同位置渲染同一内容，可一用prop来传递。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>更新后运行测试，查看 <strong>控制台警告信息</strong> 关于重名slots的提示 <code>v-model</code>。</p>
</div>

<h3 id="slot-样式参数-移除"><a href="#slot-样式参数-移除" class="headerlink" title="slot 样式参数 移除"></a><code>slot</code> 样式参数 <sup>移除</sup></h3><p>通过具名 <code>&lt;slot&gt;</code> 插入的片段不再保持 <code>slot</code> 的参数。请用一个包裹元素来控制样式。或者用更高级方法：通过编程方式修改内容 ：<a href="render-function.html">render functions</a> 。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到选择slots标签CSS选择器(例如： <code>[slot="my-slot-name"]</code>) 。</p>
</div>

<h2 id="特殊属性"><a href="#特殊属性" class="headerlink" title="特殊属性"></a>特殊属性</h2><h3 id="keep-alive-属性-替换"><a href="#keep-alive-属性-替换" class="headerlink" title="keep-alive 属性 替换"></a><code>keep-alive</code> 属性 <sup>替换</sup></h3><p><code>keep-alive</code> 不再是一个特殊属性而是一个包裹组件，类似于  <code>&lt;transition&gt;</code>比如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">v-bind:is</span>=<span class="string">"view"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这样可以在含多种状态子组件中使用 <code>&lt;keep-alive&gt;</code> ：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">todo-list</span> <span class="attr">v-if</span>=<span class="string">"todos.length &gt; 0"</span>&gt;</span><span class="tag">&lt;/<span class="name">todo-list</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">no-todos-gif</span> <span class="attr">v-else</span>&gt;</span><span class="tag">&lt;/<span class="name">no-todos-gif</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></div></pre></td></tr></table></figure>
<p class="tip">当 <code>&lt;keep-alive&gt;</code> 含有不同子组件时，应该分别影响到每一个子组件。不仅是第一个而是所有的子组件都将被忽略。</p>

<p>和 <code>&lt;transition&gt;</code>一起使用时，确保把内容包裹在内：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">transition</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">component</span> <span class="attr">v-bind:is</span>=<span class="string">"view"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到<code>keep-alive</code> 属性。</p>
</div>

<h2 id="计算插值todaymark"><a href="#计算插值todaymark" class="headerlink" title="计算插值todaymark"></a>计算插值todaymark</h2><h3 id="属性内部的计算插值-移除"><a href="#属性内部的计算插值-移除" class="headerlink" title="属性内部的计算插值 移除"></a>属性内部的计算插值 <sup>移除</sup></h3><p>属性内部的计算插值已经不能再使用了：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-&#123;&#123; size &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure>
<p>应该写成行内表达式：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-bind:class</span>=<span class="string">"'btn btn-' + size"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure>
<p>或者计算属性：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-bind:class</span>=<span class="string">"buttonClasses"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  <span class="attr">buttonClasses</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'btn btn-'</span> + size</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到属性内部的计算插值</p>
</div>

<h3 id="HTML-计算插值-移除"><a href="#HTML-计算插值-移除" class="headerlink" title="HTML 计算插值 移除"></a>HTML 计算插值 <sup>移除</sup></h3><p>HTML 的计算插值 (<code>{{{ foo }}}</code>) 已经移除，取代的是 <a href="../api/#v-html"><code>v-html</code> 指令</a>.</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到 HTML 计算插值。</p>
</div>

<h3 id="单次绑定替换"><a href="#单次绑定替换" class="headerlink" title="单次绑定替换"></a>单次绑定<sup>替换</sup></h3><p>单次绑定 (<code>{{* foo }}</code>) 已经被新的 <a href="../api/#v-once"><code>v-once</code> directive</a> 取代。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a>工具找到单次绑定使用位置。</p>
</div>

<h2 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h2><h3 id="vm-watch-changed"><a href="#vm-watch-changed" class="headerlink" title="vm.$watch changed"></a><code>vm.$watch</code> <sup>changed</sup></h3><p>通过 <code>vm.$watch</code>创建的观察器现在将在组件渲染时被激活。这样可以让你在组件渲染前更新状态，不用做不必要的更新。比如可以通过观察组件的prop变化来更新组件本身的值。</p>
<p>如果以前通过 <code>vm.$watch</code> 在组件更新后与 DOM 交互，现在就可以通过<code>updated</code>生命周期钩子来做这些。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行测试，如果有依赖于老方法的观察器将弹出 <strong>failed tests</strong>。</p>
</div>

<h3 id="vm-set-改变"><a href="#vm-set-改变" class="headerlink" title="vm.$set 改变"></a><code>vm.$set</code> <sup>改变</sup></h3><p> <code>vm.$set</code> 只是 <a href="../api/#Vue-set"><code>Vue.set</code></a> 的别名。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到过时的用法</p>
</div>

<h3 id="vm-delete-改变"><a href="#vm-delete-改变" class="headerlink" title="vm.$delete 改变"></a><code>vm.$delete</code> <sup>改变</sup></h3><p><code>vm.$delete</code> 现在只是： <a href="../api/#Vue-delete"><code>Vue.delete</code></a> 别名。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到过时的用法</p>
</div>

<h3 id="Array-prototype-set-弃用"><a href="#Array-prototype-set-弃用" class="headerlink" title="Array.prototype.$set  弃用"></a><code>Array.prototype.$set</code>  <sup>弃用</sup></h3><p>用 <code>Vue.set</code> 代替</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到数组上的<code>.$set</code>。如有遗漏请参考<strong>控制台错误信息</strong>。</p>
</div>

<h3 id="Array-prototype-remove-移除"><a href="#Array-prototype-remove-移除" class="headerlink" title="Array.prototype.$remove 移除"></a><code>Array.prototype.$remove</code> <sup>移除</sup></h3><p>用 <code>Array.prototype.splice</code> 代替，例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">methods: &#123;</div><div class="line">  <span class="attr">removeTodo</span>: <span class="function"><span class="keyword">function</span> (<span class="params">todo</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> index = <span class="keyword">this</span>.todos.indexOf(todo)</div><div class="line">    <span class="keyword">this</span>.todos.splice(index, <span class="number">1</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者更好的方法，直接给除去的方法一个index参数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">methods: &#123;</div><div class="line">  <span class="attr">removeTodo</span>: <span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.todos.splice(index, <span class="number">1</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到数组上的<code>.$remove</code>。如有遗漏请参考<strong>控制台错误信息</strong></p>
</div>

<h3 id="Vue实例上的Vue-set-和-Vue-delete移除"><a href="#Vue实例上的Vue-set-和-Vue-delete移除" class="headerlink" title="Vue实例上的Vue.set 和 Vue.delete移除"></a>Vue实例上的<code>Vue.set</code> 和 <code>Vue.delete</code><sup>移除</sup></h3><p><code>Vue.set</code> 和 <code>Vue.delete</code> 在实例上将不再起作用。现在都强制在实例的data选项中声明所有顶级响应值。如果删除实例属性或实例<code>$data</code>上的某个值，直接将它设置为null即可。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到实例中的 <code>Vue.set</code> 或 <code>Vue.delete</code> 。如有遗漏请参考<strong>控制台错误信息</strong>。</p>
</div>

<h3 id="替换-vm-data-移除"><a href="#替换-vm-data-移除" class="headerlink" title="替换 vm.$data 移除"></a>替换 <code>vm.$data</code> <sup>移除</sup></h3><p>现在禁止替换实例的 $data。这样防止了响应系统的一些极端情况并且让组件状态更加可控可预测（特别是对于存在类型检查的系统）。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到覆盖 <code>vm.$data</code>的位置。如有遗漏请参考<strong>控制台警告信息</strong>。</p>
</div>

<h3 id="vm-get-移除"><a href="#vm-get-移除" class="headerlink" title="vm.$get 移除"></a><code>vm.$get</code> <sup>移除</sup></h3><p>可以直接取回响应数据。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a>工具找到 <code>vm.$get</code> 的位置。如有遗漏请参考 <strong>控制台错误信息</strong>。</p>
</div>

<h2 id="围绕-DOM-的实例方法"><a href="#围绕-DOM-的实例方法" class="headerlink" title="围绕 DOM 的实例方法"></a>围绕 DOM 的实例方法</h2><h3 id="vm-appendTo-移除"><a href="#vm-appendTo-移除" class="headerlink" title="vm.$appendTo 移除"></a><code>vm.$appendTo</code> <sup>移除</sup></h3><p>使用 DOM 原生方法:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">myElement.appendChild(vm.$el)</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到 <code>vm.$appendTo</code> 的位置。如果有遗漏可以参考<strong>控制台错误信息</strong>。</p>
</div>

<h3 id="vm-before-移除"><a href="#vm-before-移除" class="headerlink" title="vm.$before 移除"></a><code>vm.$before</code> <sup>移除</sup></h3><p>使用 DOM 原生方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">myElement.parentNode.insertBefore(vm.$el, myElement)</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a>工具找到 <code>vm.$before</code>。如有遗漏，请参考 <strong>控制台错误信息</strong>。</p>
</div>

<h3 id="vm-after-移除"><a href="#vm-after-移除" class="headerlink" title="vm.$after 移除"></a><code>vm.$after</code> <sup>移除</sup></h3><p>使用 DOM 原生方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">myElement.parentNode.insertBefore(vm.$el, myElement.nextSibling)</div></pre></td></tr></table></figure>
<p>如果 <code>myElement</code> 是最后一个节点也可以这样写：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">myElement.parentNode.appendChild(vm.$el)</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到 <code>vm.$after</code> 的位置。如有遗漏，请参考<strong>控制台错误信息</strong>。</p>
</div>

<h3 id="vm-remove-移除"><a href="#vm-remove-移除" class="headerlink" title="vm.$remove 移除"></a><code>vm.$remove</code> <sup>移除</sup></h3><p>使用 DOM 原生方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">vm.$el.remove()</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a>找到<code>vm.$remove</code>。如有遗漏，请参考<strong>控制台错误信息</strong>。</p>
</div>

<h2 id="底层实例方法"><a href="#底层实例方法" class="headerlink" title="底层实例方法"></a>底层实例方法</h2><h3 id="vm-eval-移除"><a href="#vm-eval-移除" class="headerlink" title="vm.$eval 移除"></a><code>vm.$eval</code> <sup>移除</sup></h3><p>尽量不要使用，如果必须使用该功能并且不肯定如何使用请参考 <a href="http://forum.vuejs.org/" target="_blank" rel="external">the forum</a>。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到使用 <code>vm.$eval</code> 的位置。如有遗漏请参考<strong>控制台错误信息</strong>。</p>
</div>

<h3 id="vm-interpolate-移除"><a href="#vm-interpolate-移除" class="headerlink" title="vm.$interpolate 移除"></a><code>vm.$interpolate</code> <sup>移除</sup></h3><p>尽量不要使用，如果必须使用该功能并且不肯定如何使用请参考 <a href="http://forum.vuejs.org/" target="_blank" rel="external">the forum</a>。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到<code>vm.$interpolate</code>。如有遗漏请参考<strong>控制台错误信息</strong>.</p>
</div>

<h3 id="vm-log-移除"><a href="#vm-log-移除" class="headerlink" title="vm.$log 移除"></a><code>vm.$log</code> <sup>移除</sup></h3><p>请使用 <a href="https://github.com/vuejs/vue-devtools" target="_blank" rel="external">Vue Devtools</a> 感受最佳debug体验。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到 <code>vm.$log</code>。如有遗漏请参考<strong>控制台错误信息</strong>.</p>
</div>

<h2 id="实例-DOM-选项"><a href="#实例-DOM-选项" class="headerlink" title="实例 DOM 选项"></a>实例 DOM 选项</h2><h3 id="replace-false-移除"><a href="#replace-false-移除" class="headerlink" title="replace: false 移除"></a><code>replace: false</code> <sup>移除</sup></h3><p>现在组件总是会替换掉他们被绑定的元素。为了模仿<code>replace: false</code>的行为，可以用一个和将要替换元素类似的元素将根组件包裹起来：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">  <span class="attr">template</span>: <span class="string">'&lt;div id="app"&gt; ... &lt;/div&gt;'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>或者使用渲染函数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span> (<span class="params">h</span>) </span>&#123;</div><div class="line">    h(<span class="string">'div'</span>, &#123;</div><div class="line">      <span class="attr">attrs</span>: &#123;</div><div class="line">        <span class="attr">id</span>: <span class="string">'app'</span>,</div><div class="line">      &#125;</div><div class="line">    &#125;, <span class="comment">/* ... */</span>)</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到 <code>replace: false</code>使用的位置。</p>
</div>

<h2 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h2><h3 id="Vue-config-debug-移除"><a href="#Vue-config-debug-移除" class="headerlink" title="Vue.config.debug 移除"></a><code>Vue.config.debug</code> <sup>移除</sup></h3><p>不再需要，因为警告信息将默认在堆栈信息里输出。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 找到包含<code>Vue.config.debug</code>的地方。</p>
</div>

<h3 id="Vue-config-async-移除"><a href="#Vue-config-async-移除" class="headerlink" title="Vue.config.async 移除"></a><code>Vue.config.async</code> <sup>移除</sup></h3><p>异步操作现在需要渲染性能的支持。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a>工具找到使用<code>Vue.config.async</code>的实例。</p>
</div>

<h3 id="Vue-config-delimiters-替换"><a href="#Vue-config-delimiters-替换" class="headerlink" title="Vue.config.delimiters 替换"></a><code>Vue.config.delimiters</code> <sup>替换</sup></h3><p>以 <a href="../api/#delimiters">模板选项</a>的方式使用。这样可以在使用自定义分隔符时避免影响第三方模板。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到使用<code>Vue.config.delimiters</code>的实例。</p>
</div>

<h3 id="Vue-config-unsafeDelimiters-移除"><a href="#Vue-config-unsafeDelimiters-移除" class="headerlink" title="Vue.config.unsafeDelimiters 移除"></a><code>Vue.config.unsafeDelimiters</code> <sup>移除</sup></h3><p>HTML 插入 <a href="#HTML-Interpolation-removed">替换为 <code>v-html</code></a>.</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到 <code>Vue.config.unsafeDelimiters</code>。然后 helper 工具也会找到HTML插入的实例，可以用`v-html`来替换。</p>
</div>

<h2 id="全局-API"><a href="#全局-API" class="headerlink" title="全局 API"></a>全局 API</h2><h3 id="带-el-的-Vue-extend-移除"><a href="#带-el-的-Vue-extend-移除" class="headerlink" title="带 el 的 Vue.extend 移除"></a>带 <code>el</code> 的 <code>Vue.extend</code> <sup>移除</sup></h3><p>el 选项不再在 <code>Vue.extend</code>中使用。仅在实例创建参数中可用。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>更新后运行测试在<strong>控制台警告信息</strong>中找到关于带有<code>Vue.extend</code>的<code>el</code>。</p>
</div>

<h3 id="Vue-elementDirective-移除"><a href="#Vue-elementDirective-移除" class="headerlink" title="Vue.elementDirective 移除"></a><code>Vue.elementDirective</code> <sup>移除</sup></h3><p>用组件来代替</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到包含<code>Vue.elementDirective</code>的实例。</p>
</div>

<h3 id="Vue-partial-移除"><a href="#Vue-partial-移除" class="headerlink" title="Vue.partial 移除"></a><code>Vue.partial</code> <sup>移除</sup></h3><p>Partials 已被移除,取而代之的是更明确的组件之间的数据流–props。除非你正在使用一个部分性能关键型区域，否则建议只使用一个<a href="components.html">normal component</a>来代替。如果你是动态绑定部分的<code>name</code>,您可以使用<a href="components.html#Dynamic-Components">dynamic component</a>。</p>
<p>如果你碰巧在你的应用程序的性能关键部分使用<code>partials</code>，那么你应该升级到<a href="render-function.html#Functional-Components">functional components</a>。它们必须在纯JS / JSX文件中（而不是在<code>.vue</code>文件中），并且是无状态的和无实例的，就像<code>partials</code>。这使得渲染极快。</p>
<p><code>functional components</code>相对于<code>partials</code>一个好处是它们可以更具动态性，因为它们允许您访问JavaScript的全部功能。然而，这是有成本的。如果你从来没有使用过渲染式的组件框架，你可能需要花费更长的时间来学习它们。</p>

<div class="upgrade-path">
  <h4>升级方式</h4>
  <p>运行 <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> 工具找到包含 <code>Vue.partial</code>的实例</p>
</div>

<hr>
<blockquote>
<p>原文： <a href="http://vuejs.org/guide/migration.html" target="_blank" rel="external">http://vuejs.org/guide/migration.html</a></p>
</blockquote>
<hr>

    
      <div class="guide-links">
        
          <span>← <a href="/v2/guide/ssr.html">服务端渲染</a></span>
        
        
          <span style="float:right"><a href="/v2/guide/migration-vue-router.html">从 Vue Router 0.7.x 迁移</a> →</span>
        
      </div>
    
    <div class="footer">
      发现错误或想贡献文档？
      <a href="https://github.com/vuejs/cn.vuejs.org/tree/master/src/v2/guide/migration.md" target="_blank">
        在 Github 编辑此页!
      </a>
    </div>
</div>

                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/common.js"></script>

        <!-- ga -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-46852172-1', 'cn.vuejs.org');
          ga('send', 'pageview');
        </script>

        <!-- search -->
        <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/css/search.css">
        <script src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
        <script>
        [
          '#search-query-nav',
          '#search-query-sidebar'
        ].forEach(function (selector) {
          if (!document.querySelector(selector)) return
          docsearch({
            appId: 'BH4D9OD16A',
            apiKey: '5638280abff9d207417bb03be05f0b25',
            indexName: 'vuejs_cn2',
            inputSelector: selector
          })
        })
        </script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
    </body>
</html>
